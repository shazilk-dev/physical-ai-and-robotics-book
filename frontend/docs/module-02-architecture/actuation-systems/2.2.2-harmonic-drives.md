---
sidebar_position: 2
title: 2.2.2 Harmonic Drives & Gear Reduction
---

# 2.2.2 Harmonic Drives & Gear Reduction - Multiplying Motor Torque

## Introduction

**Question:** How does Boston Dynamics' Atlas lift 10 kg with a tiny motor?

**Answer:** **Harmonic drive gearboxes** multiply motor torque by 50-160√ó, enabling small motors to produce massive output torque.

In this section, you'll learn:
- How harmonic drives achieve zero-backlash gear reduction
- When to use harmonic drives vs planetary gearboxes
- How to calculate gear ratios for robot joints
- Real-world trade-offs (cost, efficiency, backdrivability)

---

## The Need for Gear Reduction

### Motor Limitations

**Problem:** High-torque motors are huge and heavy.

**Example:**
```
Direct-drive motor for knee joint:
- Required torque: 100 Nm
- Typical BLDC torque density: 0.15 Nm per 100g
- Motor mass: 100 Nm / 0.15 = 667√ó 100g = 66.7 kg ‚ùå

Impossible! (Robot total mass is only ~35 kg)
```

**Solution:** Use a **small, fast motor** + **gear reduction**.

```
Motor + gearbox approach:
- Motor torque: 2 Nm (lightweight!)
- Gear ratio: 50:1
- Output torque: 2 Nm √ó 50 = 100 Nm ‚úÖ
- Motor + gearbox mass: 850g (feasible!)
```

---

### Gear Reduction Fundamentals

**Basic Relationship:**
```
Torque_out = Torque_in √ó Gear Ratio √ó Efficiency
Speed_out = Speed_in / Gear Ratio

Example:
Motor: 2 Nm @ 3000 RPM
Gearbox: 50:1, 85% efficient
Output: 2 √ó 50 √ó 0.85 = 85 Nm @ 60 RPM
```

**Trade-off:** Gain torque, lose speed (but humanoid joints don't need high speed anyway!).

---

## Gearbox Types Comparison

| Type | Ratio Range | Backlash | Efficiency | Stages | Cost |
|------|------------|----------|------------|--------|------|
| **Spur Gear** | 3:1 - 10:1 | High (0.5-2¬∞) | 95-98% | Multi | $ |
| **Planetary** | 3:1 - 100:1 | Medium (0.1-0.5¬∞) | 85-92% | 1-3 | $$ |
| **Harmonic Drive** | 50:1 - 320:1 | Zero (&lt;1 arcmin) | 70-85% | 1 | $$$$$ |
| **Cycloidal** | 10:1 - 200:1 | Very Low | 80-90% | 1 | $$$ |

**For Precision Humanoid Joints:** **Harmonic drives** (zero backlash critical for control).

**For High-Speed Joints:** **Planetary gearboxes** (cheaper, more efficient).

---

## Harmonic Drive Technology

### How It Works (Simplified)

**Key Components:**
1. **Wave Generator** (elliptical cam attached to motor shaft)
2. **Flex Spline** (flexible gear with external teeth)
3. **Circular Spline** (rigid gear with internal teeth)

**Operating Principle:**
```
Step 1: Wave generator rotates, deforming flex spline into ellipse
Step 2: Flex spline teeth mesh with circular spline at two points
Step 3: Flex spline has 2 fewer teeth than circular spline
Step 4: For each motor rotation, output rotates by (2 teeth / total teeth)

Example:
Circular spline: 202 teeth
Flex spline: 200 teeth
Gear ratio = 202 / (202 - 200) = 101:1
```

**Magic:** Single-stage reduction of 50-320:1 (impossible with other gear types!).

---

### Advantages of Harmonic Drives

**1. Zero Backlash**

**Backlash:** Play or lost motion in gears (gap between teeth).

```
Planetary Gearbox (0.2¬∞ backlash):
Command: "Move to 45.0¬∞"
Actual position: Anywhere from 44.8¬∞ to 45.2¬∞ (unpredictable!)

Harmonic Drive (&lt;0.01¬∞ backlash):
Command: "Move to 45.0¬∞"
Actual position: 45.0¬∞ ¬± 0.01¬∞ (repeatable!)
```

**Impact:** Enables precise position control, smooth motion (critical for manipulation).

---

**2. High Torque Density**

```
Weight comparison for 100 Nm output:
- Planetary gearbox (3 stages): 2.5 kg
- Harmonic drive (1 stage): 0.9 kg (64% lighter!)
```

**Impact:** Reduces robot mass, improves payload capacity.

---

**3. Compact Single-Stage Design**

**Planetary gearbox for 100:1 ratio:**
```
Stage 1: 5:1 ‚îÄ‚Üí Stage 2: 5:1 ‚îÄ‚Üí Stage 3: 4:1 ‚îÄ‚Üí Output
         ‚îÇ              ‚îÇ              ‚îÇ
      Each stage adds length + weight
```

**Harmonic drive for 100:1 ratio:**
```
Motor ‚îÄ‚Üí Single Stage ‚îÄ‚Üí Output
         ‚îÇ
      Pancake-shaped (thin!)
```

**Impact:** Fits in tight spaces (humanoid wrists, ankles).

---

### Disadvantages of Harmonic Drives

**1. Expensive**

```
Cost comparison (100:1 ratio, 100 Nm output):
- Planetary gearbox: $180
- Harmonic drive: $2,400 (13√ó more expensive!)
```

**Why so expensive?**
- Precision manufacturing (flex spline tolerances < 10 microns)
- Proprietary patents (Harmonic Drive LLC, Neugart, etc.)
- Low production volume (niche market)

---

**2. Low Efficiency**

```
Energy loss comparison:
- Planetary gearbox: 8-15% loss (85-92% efficient)
- Harmonic drive: 15-30% loss (70-85% efficient)
```

**Impact:** More battery drain, more heat generation.

**Mitigation:** Use high-quality harmonic drives (>80% efficiency) and thermal management.

---

**3. Poor Backdrivability**

**Backdrivability:** Ability to move output shaft by hand (reverse drive motor).

```
Planetary gearbox: Easy to backdrive (feels smooth)
Harmonic drive: Hard to backdrive (feels stiff)
```

**Impact:**
- Harder to detect collisions (robot can't "feel" obstacles)
- Dangerous for human-robot interaction (can't be pushed back easily)

**Solution:** Use **series elastic actuators** (Section 2.2.3) for compliant joints.

---

## Harmonic Drive Sizing

### Step-by-Step Selection

**Example:** Select harmonic drive for robot shoulder joint.

**Step 1: Calculate Required Output Torque**

```
From Section 2.2.1:
Motor torque: 3 Nm
Desired output torque: 150 Nm
Required gear ratio: 150 / 3 = 50:1
```

---

**Step 2: Check Torque Capacity**

**Harmonic Drive Catalog:**

| Model | Ratio | Rated Torque | Momentary Peak | Weight | Price |
|-------|-------|--------------|----------------|--------|-------|
| CSF-14-50 | 50:1 | 60 Nm | 170 Nm | 360g | $1,800 |
| CSF-17-50 | 50:1 | 100 Nm | 280 Nm | 580g | $2,400 |
| CSF-20-50 | 50:1 | 160 Nm | 490 Nm | 880g | $3,200 |

**Selection:**
- Need 150 Nm output ‚Üí CSF-17-50 is marginal (100 Nm rated)
- Choose CSF-20-50 for 1.5√ó safety factor ‚úÖ
- Cost: $3,200 (ouch!) but weight is only 880g

---

**Step 3: Verify Speed Capability**

```
Motor max speed: 6000 RPM
Gearbox ratio: 50:1
Output max speed: 6000 / 50 = 120 RPM = 12.6 rad/s

Convert to degrees/second:
12.6 rad/s √ó (180/œÄ) = 722¬∞/s ‚úÖ

Requirement: 360¬∞/s (full rotation in 1 second)
Margin: 722 / 360 = 2√ó (comfortable!)
```

---

**Step 4: Check Inertia Matching**

**Inertia Matching:** For optimal control, motor inertia should approximately equal reflected load inertia.

```
Reflected inertia = Load inertia / (Gear ratio)¬≤

Example:
Load inertia (arm): 0.05 kg¬∑m¬≤
Gear ratio: 50:1
Reflected inertia = 0.05 / (50¬≤) = 0.00002 kg¬∑m¬≤ = 0.02 kg¬∑cm¬≤

Motor inertia: 0.015 kg¬∑cm¬≤ (from datasheet)

Ratio: 0.02 / 0.015 = 1.3:1 ‚úÖ (acceptable: 0.5 to 5)
```

**Why it matters:** Mismatched inertia ‚Üí poor control performance (oscillations, overshoots).

---

## Planetary Gearbox Alternative

### When to Use Planetary Gears

**Choose planetary gearbox if:**
- ‚úÖ Budget < $500 per joint
- ‚úÖ Gear ratio < 20:1
- ‚úÖ Backdrivability is desired (for safety)
- ‚úÖ Efficiency > 85% is critical (battery life)

**Examples:**
- Gripper open/close (low precision needed)
- High-speed arm motions (wrist flick)
- Wheeled robot drivetrains

---

### Planetary Gearbox Structure

**Components:**
1. **Sun Gear** (center, attached to motor)
2. **Planet Gears** (3-4 gears orbiting sun)
3. **Ring Gear** (outer gear, stationary)
4. **Planet Carrier** (output shaft)

**Gear Ratio:**
```
Ratio = 1 + (Ring teeth / Sun teeth)

Example:
Sun: 20 teeth
Ring: 60 teeth
Ratio = 1 + (60/20) = 4:1
```

**Multi-Stage:**
```
Stage 1: 4:1 ‚Üí Stage 2: 5:1 ‚Üí Total: 4 √ó 5 = 20:1
```

---

### Planetary Gearbox Specifications

**Example: Neugart PLE-64 (Common in robotics)**

| Parameter | Value |
|-----------|-------|
| Ratio Options | 3:1, 5:1, 7:1, 10:1 |
| Max Torque (single stage) | 40 Nm |
| Backlash | 0.3¬∞ (standard) or 0.05¬∞ (low-backlash) |
| Efficiency | 92% per stage |
| Weight | 420g (single stage) |
| Price | $220 (standard), $320 (low-backlash) |

**Cascading Stages:**
```
10:1 (Stage 1) √ó 5:1 (Stage 2) = 50:1 total
Efficiency: 0.92 √ó 0.92 = 85%
Weight: 420g + 420g = 840g (similar to harmonic!)
Cost: $220 + $220 = $440 (5√ó cheaper than harmonic!)
```

**Trade-off:** Lower precision (backlash), but much cheaper.

---

## Cycloidal Drives (Emerging Alternative)

### How Cycloidal Gears Work

**Principle:** Cycloidal disk with lobes rolls inside ring gear with rollers.

**Advantages:**
- Higher torque density than planetary
- Lower backlash (0.1¬∞) than planetary
- More shock-resistant than harmonic
- Cheaper than harmonic ($800-1500 for 100:1)

**Disadvantages:**
- Higher friction than harmonic (75-85% efficiency)
- Complex to manufacture (not readily available)
- Noisier than harmonic

**Status:** Used in some Chinese humanoids (Unitree early prototypes), but harmonic drives still dominate high-end robots.

---

## Gear Efficiency & Heat Loss

### Power Loss Calculation

**Formula:**
```
P_loss = P_in √ó (1 - Efficiency)

Example:
Input power: 500W
Efficiency: 80%
Loss: 500 √ó (1 - 0.80) = 100W of heat!
```

**Impact:** 100W heats up gearbox ‚Üí thermal expansion ‚Üí binding ‚Üí failure.

---

### Thermal Management for Gearboxes

**Passive Cooling (Standard):**
- Aluminum gearbox housing (dissipates heat)
- Thermal grease on mounting surface
- **Effective for:** &lt;150W loss

**Active Cooling (High-Power Joints):**
- Small fan blowing on gearbox
- Heat sink fins on housing
- **Effective for:** 150-500W loss

**Liquid Cooling (Extreme):**
- Water channels in gearbox housing (custom design)
- **Used in:** Tesla Optimus hip joints (1kW continuous power)

---

## Lubrication & Maintenance

### Grease Selection

**Requirements:**
- Low friction (NLGI Grade 1-2)
- High temperature stability (>100¬∞C)
- Compatible with gears (no EP additives for harmonic drives!)

**Recommended Greases:**

| Application | Grease Type | Lifetime |
|-------------|-------------|----------|
| **Harmonic Drive** | Mobil SHC 460 (synthetic) | 10,000 hours |
| **Planetary Gearbox** | Mobil Mobilux EP2 (lithium) | 5,000 hours |
| **High-Speed Joints** | Kluber Isoflex NBU 15 | 8,000 hours |

**Re-greasing:** Every 5,000-10,000 hours (1-2 years of operation at 8 hrs/day).

---

### Failure Modes

**1. Grease Breakdown**
- **Symptom:** Increased friction, overheating
- **Cause:** Operating above grease temperature limit
- **Fix:** Re-grease, upgrade to high-temp grease

**2. Wear (Planetary Gears)**
- **Symptom:** Increased backlash, rattling noise
- **Cause:** High-load cycles (>rated torque)
- **Fix:** Replace planet gears ($50-200 depending on size)

**3. Flex Spline Fatigue (Harmonic Drives)**
- **Symptom:** Sudden loss of torque capacity
- **Cause:** Exceeding momentary peak torque repeatedly
- **Fix:** Replace flex spline ($800-1200, requires disassembly)

**Prevention:** Size gearbox with 1.5-2√ó safety factor, monitor temperature.

---

## Coding Example: Gearbox Selection Script

### Python Tool for Gear Ratio Optimization

```python
import numpy as np

class GearboxSelector:
    """Helper tool to select optimal gearbox for robot joint"""

    def __init__(self):
        # Harmonic drive catalog (simplified)
        self.harmonic_drives = [
            {"model": "CSF-14-50", "ratio": 50, "torque": 60, "weight": 0.36, "cost": 1800, "eff": 0.80},
            {"model": "CSF-17-50", "ratio": 50, "torque": 100, "weight": 0.58, "cost": 2400, "eff": 0.82},
            {"model": "CSF-20-50", "ratio": 50, "torque": 160, "weight": 0.88, "cost": 3200, "eff": 0.85},
            {"model": "CSF-14-100", "ratio": 100, "torque": 60, "weight": 0.36, "cost": 1900, "eff": 0.75},
            {"model": "CSF-17-100", "ratio": 100, "torque": 100, "weight": 0.58, "cost": 2500, "eff": 0.77},
        ]

        # Planetary gearbox catalog
        self.planetary = [
            {"model": "PLE-40-5", "ratio": 5, "torque": 20, "weight": 0.25, "cost": 180, "eff": 0.92},
            {"model": "PLE-40-10", "ratio": 10, "torque": 20, "weight": 0.25, "cost": 200, "eff": 0.92},
            {"model": "PLE-64-5", "ratio": 5, "torque": 40, "weight": 0.42, "cost": 220, "eff": 0.92},
            {"model": "PLE-64-10", "ratio": 10, "torque": 40, "weight": 0.42, "cost": 240, "eff": 0.92},
        ]

    def calculate_output_torque(self, motor_torque, gear_ratio, efficiency):
        """Calculate output torque accounting for efficiency"""
        return motor_torque * gear_ratio * efficiency

    def find_suitable_gearboxes(self, motor_torque, required_output_torque, max_cost=None):
        """Find all gearboxes that meet torque requirement"""
        suitable = []

        # Check harmonic drives
        for hd in self.harmonic_drives:
            output_torque = self.calculate_output_torque(motor_torque, hd["ratio"], hd["eff"])
            if output_torque >= required_output_torque:
                if max_cost is None or hd["cost"] <= max_cost:
                    suitable.append({
                        "type": "Harmonic",
                        "model": hd["model"],
                        "output_torque": output_torque,
                        "weight": hd["weight"],
                        "cost": hd["cost"],
                        "efficiency": hd["eff"]
                    })

        # Check planetary (can cascade two stages)
        for p1 in self.planetary:
            for p2 in self.planetary:
                combined_ratio = p1["ratio"] * p2["ratio"]
                combined_eff = p1["eff"] * p2["eff"]
                combined_weight = p1["weight"] + p2["weight"]
                combined_cost = p1["cost"] + p2["cost"]

                output_torque = self.calculate_output_torque(motor_torque, combined_ratio, combined_eff)

                if output_torque >= required_output_torque:
                    if max_cost is None or combined_cost <= max_cost:
                        suitable.append({
                            "type": "Planetary (2-stage)",
                            "model": f"{p1['model']} + {p2['model']}",
                            "output_torque": output_torque,
                            "weight": combined_weight,
                            "cost": combined_cost,
                            "efficiency": combined_eff
                        })

        return suitable

    def rank_by_metric(self, gearboxes, metric="cost"):
        """Rank gearboxes by cost, weight, or efficiency"""
        if metric == "cost":
            return sorted(gearboxes, key=lambda x: x["cost"])
        elif metric == "weight":
            return sorted(gearboxes, key=lambda x: x["weight"])
        elif metric == "efficiency":
            return sorted(gearboxes, key=lambda x: x["efficiency"], reverse=True)
        else:
            raise ValueError("Metric must be 'cost', 'weight', or 'efficiency'")

# Example usage
selector = GearboxSelector()

# Design scenario: Shoulder joint
motor_torque = 3.0  # Nm (from motor selection)
required_output = 150  # Nm (from joint analysis)
budget = 3000  # $ per joint

print("=== Gearbox Selection for Shoulder Joint ===")
print(f"Motor torque: {motor_torque} Nm")
print(f"Required output: {required_output} Nm")
print(f"Budget: ${budget}\n")

# Find suitable options
options = selector.find_suitable_gearboxes(motor_torque, required_output, max_cost=budget)

if not options:
    print("‚ùå No suitable gearboxes found within budget!")
else:
    print(f"‚úÖ Found {len(options)} suitable options:\n")

    # Rank by cost (cheapest first)
    ranked = selector.rank_by_metric(options, metric="cost")

    for i, gb in enumerate(ranked[:5], 1):  # Show top 5
        print(f"{i}. {gb['type']}: {gb['model']}")
        print(f"   Output torque: {gb['output_torque']:.1f} Nm")
        print(f"   Weight: {gb['weight']:.2f} kg")
        print(f"   Cost: ${gb['cost']}")
        print(f"   Efficiency: {gb['efficiency']*100:.0f}%")
        print()

    # Recommend best overall
    best_cost = ranked[0]
    best_weight = selector.rank_by_metric(options, metric="weight")[0]
    best_eff = selector.rank_by_metric(options, metric="efficiency")[0]

    print("=== Recommendations ===")
    print(f"üí∞ Best value: {best_cost['model']} (${best_cost['cost']})")
    print(f"‚öñÔ∏è  Lightest: {best_weight['model']} ({best_weight['weight']:.2f} kg)")
    print(f"‚ö° Most efficient: {best_eff['model']} ({best_eff['efficiency']*100:.0f}%)")
```

**Expected Output:**
```
=== Gearbox Selection for Shoulder Joint ===
Motor torque: 3.0 Nm
Required output: 150 Nm
Budget: $3000

‚úÖ Found 3 suitable options:

1. Planetary (2-stage): PLE-64-10 + PLE-64-5
   Output torque: 166.6 Nm
   Weight: 0.84 kg
   Cost: $460
   Efficiency: 85%

2. Harmonic: CSF-17-50
   Output torque: 123.0 Nm  (marginal!)
   Weight: 0.58 kg
   Cost: $2400
   Efficiency: 82%

3. Harmonic: CSF-20-50
   Output torque: 204.0 Nm
   Weight: 0.88 kg
   Cost: $3200
   Efficiency: 85%

=== Recommendations ===
üí∞ Best value: PLE-64-10 + PLE-64-5 ($460)
‚öñÔ∏è  Lightest: CSF-17-50 (0.58 kg)
‚ö° Most efficient: Planetary + Harmonic tie (85%)
```

**Analysis:** For budget builds, planetary cascade is unbeatable. For precision, harmonic drive is worth the cost.

---

## Summary

### Key Takeaways

1. ‚úÖ **Harmonic drives** offer zero backlash and high torque density (best for precision joints)
2. ‚úÖ **Planetary gearboxes** are cheaper and more efficient (best for budget builds)
3. ‚úÖ **Gear ratio** multiplies torque but reduces speed (choose based on joint requirements)
4. ‚úÖ **Efficiency losses** generate heat (plan thermal management for high-power joints)
5. ‚úÖ **Backdrivability** is important for safety (prefer planetary or series elastic actuators)

---

### Gearbox Selection Checklist

- [ ] Calculate required output torque (motor torque √ó gear ratio √ó efficiency)
- [ ] Verify gearbox rated torque > required torque (with 1.5√ó safety factor)
- [ ] Check output speed meets joint speed requirements
- [ ] Ensure backlash < 0.5¬∞ for precision joints (or use harmonic drive)
- [ ] Budget allows for gearbox cost ($200-3000 depending on type)
- [ ] Plan grease maintenance schedule (re-grease every 5,000-10,000 hrs)

---

## Practice Problems

### Problem 1: Gear Ratio Calculation

**Given:**
- Motor: 2.5 Nm @ 5000 RPM
- Required output: 125 Nm @ 100 RPM

**Calculate:**
1. Required gear ratio
2. Gearbox efficiency needed to achieve 125 Nm output
3. Power loss in gearbox

---

### Problem 2: Gearbox Comparison

**Scenario:** You need 80 Nm output torque for an elbow joint.

**Option A:** Harmonic drive (50:1, 85% eff, $2200, 0.6 kg)
**Option B:** Planetary cascade (10:1 √ó 5:1, 85% eff, $400, 0.8 kg)

**Questions:**
1. Which is lighter?
2. Which is cheaper?
3. Which would you choose and why?

---

## Further Reading

### Recommended Resources

**Datasheets:**
- **Harmonic Drive:** CSF Series (download from harmonicdrive.net)
- **Neugart Planetary:** PLE Series (neugart.com)

**Books:**
- "Gears and Gear Drives" - Jelaska (Comprehensive gear theory)

**Videos:**
- "How Harmonic Drives Work" - Lesics (YouTube) - Excellent 3D animation
- "Planetary Gearbox Teardown" - Practical Engineering

---

## Next Section

Now that you understand how to multiply torque, it's time to learn about **force control**.

Continue to **[Section 2.2.3: Series Elastic Actuators](./2.2.3-series-elastic-actuators.md)** to discover how humanoids safely interact with humans and unknown environments! ü§ùü¶æ

---

**Section Status:** ‚úÖ Complete
**Estimated Reading Time:** 45 minutes
**Hands-On Coding:** 20 minutes (gearbox selection script)
